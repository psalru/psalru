---
sidebar_label: Рейтинги университетов
description: Парсинг международных (российских и зарубежных) рейтингов университетов
---

# Парсинг рейтингов университетов

Одна из самых популярных «вузомерок» — международные рейтинги университетов. Есть российские, есть зарубежные. В данном материале собраны «рецепты» парсинга следующих рейтингов:

1. [Московский рейтинг университетов — три миссии университета](https://mosiur.org/)
1. [Рейтинг университетов Интерфакса](https://academia.interfax.ru/ru/ratings/?rating=1&year=2023&page=1)
1. [RAEX ТОП 100](https://raex-rr.com/education/russian_universities/top-100_universities/2023/)
1. Шанхайский рейтинг университетов
1. [Рейтинг Best Global Universities](https://www.usnews.com/education/best-global-universities/rankings), в т.ч. по предметам
1. QS-рейтинг университетов, в т.ч. по предметам
1. Рейтинг университетов от Times Higher Education

Рейтинги выходят (обновляются) в разное время года. На момент написания данного материала (июль 2023 г.), почти все рейтинги включали 2023 год (внимание на переменную `years`, если она используется в коде).

## Московский рейтинг университетов

```python showLineNumbers title="Необходимые библиотеки для данного рейтинга"
import time
import requests
import pandas as pd
from bs4 import BeautifulSoup
```


```python showLineNumbers title="Парсим данные рейтинга"
years = list(range(2020, 2022 + 1))
msk_data = []

for y in years:
    # Обратите внимание на вариативность в url (последний год отличается от всех остальных)
    msk_url = f"https://mosiur.org/{'ranking' if y == 2022 else 'ranking' + str(y)}/"
    msk_resp = requests.get(msk_url)

    if msk_resp.status_code == 200:
        msk_soup = BeautifulSoup(msk_resp.text)

        for tr in msk_soup.select('#top_table tbody tr'):
            tds = tr.find_all('td')
            msk_data.append({
                'year': y,
                'rank': tds[0].text,
                'university': tds[1].text,
                'country': tds[2].text
            })
    else:
        print(f"{msk_url} return status code {msk_resp.status_code}")

    # Бережём источник данных
    time.sleep(1)

msk_df = pd.DataFrame(msk_data)
msk_df.to_csv(f"data/msk_{min(years)}-{max(years)}.csv", index=False)
msk_df.to_excel(f"data/msk_{min(years)}-{max(years)}.xlsx", index=False)
msk_df.head(5)
```

<div>
<table class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th>year</th>
      <th>rank</th>
      <th>university</th>
      <th>country</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020</td>
      <td>1</td>
      <td>Harvard University</td>
      <td>США</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020</td>
      <td>2</td>
      <td>Massachusetts Institute of Technology</td>
      <td>США</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020</td>
      <td>3</td>
      <td>University of Cambridge</td>
      <td>Великобритания</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020</td>
      <td>4</td>
      <td>University of Oxford</td>
      <td>Великобритания</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020</td>
      <td>5</td>
      <td>University of Pennsylvania</td>
      <td>США</td>
    </tr>
  </tbody>
</table>
</div>


Данные «Московского рейтинга» получены. Давайте посмотрим представительство стран по годам (ТОП 10).


```python showLineNumbers title="Строим сводную таблицу и выводим ТОП 10"
msk_pivot = pd.pivot_table(
    msk_df,
    index='country',
    columns='year',
    values='university',
    aggfunc='count'
)
msk_pivot['sum'] = msk_pivot.sum(axis=1)
msk_pivot.sort_values(by='sum', ascending=False).head(10)
```

<div>
<table class="dataframe">
  <thead>
    <tr>
      <th>year</th>
      <th>2020</th>
      <th>2021</th>
      <th>2022</th>
      <th>sum</th>
    </tr>
    <tr>
      <th>country</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>США</th>
      <td>220.0</td>
      <td>239.0</td>
      <td>253.0</td>
      <td>712.0</td>
    </tr>
    <tr>
      <th>Китай</th>
      <td>122.0</td>
      <td>144.0</td>
      <td>173.0</td>
      <td>439.0</td>
    </tr>
    <tr>
      <th>Россия</th>
      <td>101.0</td>
      <td>112.0</td>
      <td>146.0</td>
      <td>359.0</td>
    </tr>
    <tr>
      <th>Великобритания</th>
      <td>98.0</td>
      <td>106.0</td>
      <td>108.0</td>
      <td>312.0</td>
    </tr>
    <tr>
      <th>Япония</th>
      <td>93.0</td>
      <td>102.0</td>
      <td>101.0</td>
      <td>296.0</td>
    </tr>
    <tr>
      <th>Германия</th>
      <td>69.0</td>
      <td>73.0</td>
      <td>74.0</td>
      <td>216.0</td>
    </tr>
    <tr>
      <th>Италия</th>
      <td>50.0</td>
      <td>54.0</td>
      <td>54.0</td>
      <td>158.0</td>
    </tr>
    <tr>
      <th>Индия</th>
      <td>45.0</td>
      <td>51.0</td>
      <td>58.0</td>
      <td>154.0</td>
    </tr>
    <tr>
      <th>Испания</th>
      <td>42.0</td>
      <td>55.0</td>
      <td>56.0</td>
      <td>153.0</td>
    </tr>
    <tr>
      <th>Франция</th>
      <td>40.0</td>
      <td>45.0</td>
      <td>54.0</td>
      <td>139.0</td>
    </tr>
  </tbody>
</table>
</div>


## Рейтинг Интерфакса

```python showLineNumbers title="Необходимые библиотеки для данного рейтинга"
import time
import requests
import pandas as pd
```

```python showLineNumbers title="Вспомогательная функция для парсинга данных"
def get_interfax_list_by_year(year, page=1):
    url = f"https://academia.interfax.ru/data/rating/?rating=1&year={year}&page={page}"
    result = []
    resp = requests.get(url)

    # Бережём источник данных
    time.sleep(1)

    if resp.status_code == 200:
        json_data = resp.json()
        result += json_data['universities']
        page_count = json_data['page_count']

        if page != page_count:
            result += get_interfax_list_by_year(year, page + 1)
    else:
        print(f"{url} return status code {resp.status_code}")

    return result
```


```python showLineNumbers title="Парсим данные рейтинга"
years = list(range(2020, 2023 + 1))
interfax_df = pd.DataFrame()

for y in years:
    interfax_df_by_year = pd.DataFrame(get_interfax_list_by_year(y))
    interfax_df_by_year['year'] = y
    interfax_df = pd.concat([interfax_df, interfax_df_by_year], ignore_index=True)

interfax_df.to_csv(f"data/interfax_{min(years)}-{max(years)}.csv", index=False)
interfax_df.to_excel(f"data/interfax_{min(years)}-{max(years)}.xlsx", index=False)
interfax_df.head()
```


<div>
<table class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th>change</th>
      <th>description</th>
      <th>is_close</th>
      <th>point</th>
      <th>rank</th>
      <th>name</th>
      <th>id</th>
      <th>url</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>None</td>
      <td>False</td>
      <td>1000</td>
      <td>1</td>
      <td>Московский государственный университет имени М...</td>
      <td>1</td>
      <td>https://www.msu.ru</td>
      <td>2020</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>None</td>
      <td>False</td>
      <td>963</td>
      <td>2</td>
      <td>Национальный исследовательский ядерный универс...</td>
      <td>2</td>
      <td>https://mephi.ru</td>
      <td>2020</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>None</td>
      <td>False</td>
      <td>961</td>
      <td>3</td>
      <td>Московский физико-технический институт (национ...</td>
      <td>4</td>
      <td>https://mipt.ru</td>
      <td>2020</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>None</td>
      <td>False</td>
      <td>857</td>
      <td>4</td>
      <td>Национальный исследовательский университет «Вы...</td>
      <td>6</td>
      <td>https://www.hse.ru</td>
      <td>2020</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>None</td>
      <td>False</td>
      <td>848</td>
      <td>5</td>
      <td>Новосибирский национальный исследовательский г...</td>
      <td>3</td>
      <td>http://www.nsu.ru/?lang=ru</td>
      <td>2020</td>
    </tr>
  </tbody>
</table>
</div>


В данных рейтинга Интерфакса уже есть значения про движение университета в рамках рейтинга. Давайте посмотрим на ТОП 10 университетов, которые поднялись в рейтинге за последние года больше всех.


```python showLineNumbers title="Строим сводную таблицу и выводим ТОП 10"
interfax_pivot = pd.pivot_table(
    interfax_df,
    index='name',
    columns='year',
    values='change',
    aggfunc='sum'
)
interfax_pivot['sum'] = interfax_pivot.sum(axis=1)
interfax_pivot.sort_values(by='sum', ascending=False).head(10)
```

<div>
<table class="dataframe">
  <thead>
    <tr>
      <th>year</th>
      <th>2020</th>
      <th>2021</th>
      <th>2022</th>
      <th>2023</th>
      <th>sum</th>
    </tr>
    <tr>
      <th>name</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Университет Синергия</th>
      <td>-1.0</td>
      <td>78.0</td>
      <td>43.0</td>
      <td>44.0</td>
      <td>164.0</td>
    </tr>
    <tr>
      <th>Московский институт психоанализа</th>
      <td>-8.0</td>
      <td>3.0</td>
      <td>128.0</td>
      <td>25.0</td>
      <td>148.0</td>
    </tr>
    <tr>
      <th>Чеченский государственный университет имени А.А.Кадырова</th>
      <td>-22.0</td>
      <td>83.0</td>
      <td>58.0</td>
      <td>14.0</td>
      <td>133.0</td>
    </tr>
    <tr>
      <th>Московский государственный психолого-педагогический университет</th>
      <td>15.0</td>
      <td>78.0</td>
      <td>18.0</td>
      <td>12.0</td>
      <td>123.0</td>
    </tr>
    <tr>
      <th>Уральский государственный аграрный университет</th>
      <td>-21.0</td>
      <td>40.0</td>
      <td>104.0</td>
      <td>-4.0</td>
      <td>119.0</td>
    </tr>
    <tr>
      <th>Красноярский государственный аграрный университет</th>
      <td>-1.0</td>
      <td>-12.0</td>
      <td>122.0</td>
      <td>3.0</td>
      <td>112.0</td>
    </tr>
    <tr>
      <th>Уральский государственный горный университет</th>
      <td>25.0</td>
      <td>17.0</td>
      <td>21.0</td>
      <td>48.0</td>
      <td>111.0</td>
    </tr>
    <tr>
      <th>Кировский государственный медицинский университет</th>
      <td>25.0</td>
      <td>12.0</td>
      <td>31.0</td>
      <td>40.0</td>
      <td>108.0</td>
    </tr>
    <tr>
      <th>Кубанский государственный технологический университет</th>
      <td>24.0</td>
      <td>18.0</td>
      <td>61.0</td>
      <td>-9.0</td>
      <td>94.0</td>
    </tr>
    <tr>
      <th>Государственный университет просвещения (МГОУ)</th>
      <td>5.0</td>
      <td>28.0</td>
      <td>51.0</td>
      <td>1.0</td>
      <td>85.0</td>
    </tr>
  </tbody>
</table>
</div>


## RAEX ТОП 100

```python showLineNumbers title="Необходимые библиотеки для данного рейтинга"
import re
import time
import requests
import numpy as np
import pandas as pd
from bs4 import BeautifulSoup
```


```python showLineNumbers title="Парсим данные рейтинга"
years = list(range(2020, 2023 + 1))
raex_list = []

for y in years:
    raex_url = f"https://raex-rr.com/pro/education/russian_universities/top-100_universities/{y}/"
    raex_resp = requests.get(raex_url)

    if raex_resp.status_code == 200:
        raex_soup = BeautifulSoup(raex_resp.text)
        raex_trs = raex_soup.select('#rrp_table_wrapper > table > tbody.list > tr')

        for i, tr in enumerate(raex_trs):
            th = tr.findChildren('th', recursive=False)
            td = tr.findChildren('td', recursive=False)

            raex_list.append({
                'year': y,
                'rank': int(th[0].text),
                'title': re.sub(r'[\s\n]+', ' ', th[1].text).strip(),
                'previous': float(td[0].text) if td[0].text != '-' else np.NaN,
                'points': float(td[1].text),
                'quality': int(td[2].text),
                'graduates': int(td[3].text),
                'science': int(td[4].text)
            })
    else:
        print(f"{raex_url} return status code {raex_resp.status_code}")

    # Бережём источник данных
    time.sleep(1)

raex_df = pd.DataFrame(raex_list)
raex_df.to_csv(f"data/raex_{min(years)}-{max(years)}.csv", index=False)
raex_df.to_excel(f"data/raex_{min(years)}-{max(years)}.xlsx", index=False)
raex_df.head()
```


<div>
<table class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th>year</th>
      <th>rank</th>
      <th>title</th>
      <th>previous</th>
      <th>points</th>
      <th>quality</th>
      <th>graduates</th>
      <th>science</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020</td>
      <td>1</td>
      <td>Московский государственный университет имени М...</td>
      <td>1.0</td>
      <td>4.8419</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020</td>
      <td>2</td>
      <td>Московский физико-технический институт (национ...</td>
      <td>2.0</td>
      <td>4.7734</td>
      <td>2</td>
      <td>7</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020</td>
      <td>3</td>
      <td>Национальный исследовательский ядерный универс...</td>
      <td>3.0</td>
      <td>4.5535</td>
      <td>5</td>
      <td>5</td>
      <td>4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020</td>
      <td>4</td>
      <td>Санкт-Петербургский государственный университет</td>
      <td>4.0</td>
      <td>4.5394</td>
      <td>3</td>
      <td>12</td>
      <td>7</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020</td>
      <td>5</td>
      <td>Национальный исследовательский университет "Вы...</td>
      <td>5.0</td>
      <td>4.4933</td>
      <td>6</td>
      <td>2</td>
      <td>11</td>
    </tr>
  </tbody>
</table>
</div>


В отличие от предыдущих рейтингов, в данном рейтинге каждому университету присваивается конкретная позиция в рейтинге. Давайте посмотрим ТОП 10 лидеров по средней позиции в рейтинге за скачанные года.


```python showLineNumbers title="Вычисляем ТОП 10 по средней позиции"
raex_df[['title', 'rank']].groupby(by='title').mean().sort_values(by='rank').head(10)
```

<div>
<table class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th>rank</th>
    </tr>
    <tr>
      <th>title</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Московский государственный университет имени М.В. Ломоносова</th>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>Московский физико-технический институт (национальный исследовательский университет)</th>
      <td>2.000000</td>
    </tr>
    <tr>
      <th>Национальный исследовательский ядерный университет «МИФИ»</th>
      <td>3.500000</td>
    </tr>
    <tr>
      <th>Санкт-Петербургский государственный университет</th>
      <td>3.500000</td>
    </tr>
    <tr>
      <th>Национальный исследовательский университет "Высшая школа экономики"</th>
      <td>5.250000</td>
    </tr>
    <tr>
      <th>Московский государственный технический университет имени Н.Э. Баумана (национальный исследовательский университет)</th>
      <td>6.000000</td>
    </tr>
    <tr>
      <th>МГИМО МИД России</th>
      <td>6.750000</td>
    </tr>
    <tr>
      <th>Санкт-Петербургский политехнический университет Петра Великого</th>
      <td>8.250000</td>
    </tr>
    <tr>
      <th>Национальный исследовательский Томский политехнический университет</th>
      <td>8.666667</td>
    </tr>
    <tr>
      <th>Томский политехнический университет</th>
      <td>9.000000</td>
    </tr>
  </tbody>
</table>
</div>


**Обратите внимание** на то, что рейтинговое агентство RAEX «богато» на рейтинги (полный список [тут](https://raex-rr.com/all_rankings/)). Для парсинга других рейтингов, механики будут +/- аналогичные.


## Шанхайский рейтинг университетов

## Best Global Universities

### Основной

### Предметный

## QS-рейтинг университетов

### Основной

### Предметный

## Times Higher Education